{% extends 'intranet.html.twig' %}

{% block content %}

<ol class="breadcrumb">
	<li><a href="index.php?uc=intranet&action">Accueil</a></li>
	<li><a href="index.php?uc=formation&action=grille">Liste des formations</a></li>
	<li><a href="index.php?uc=formation&action=consulter&code={{ dossierPdf.codeFormation }}">Fiche formation</a></li>
    <li><a href="index.php?uc=dossierPdf&action=grille&code={{ dossierPdf.codeFormation }}">Liste des dossiers</a></li>
	<li class="active">Liste des documents spécifiques</li>
</ol>

<h2 class="titre_rubrique">Documents requis par la formation</h2>

<a href="index.php?uc=documentSpecifique&action=ajouter&dossierPdf={{ dossierPdf.id }}" class="btn btn-lg btn-primary">
	<span class="glyphicon glyphicon-plus-sign"></span> Ajouter un document à joindre
</a>

{% if documentsSpecifiques is not empty %}

<table style="margin-top: 1em;" class="table table-hover table-bordered table-striped">
	<tr>
		<th>Nom</th>
		<th>Url</th>
		<th>Options</th>
	</tr>
        {% for documentSpecifique in documentsSpecifiques %}
	<tr>
		<td>{{ documentSpecifique.nom }}</td>
		<td>{{ documentSpecifique.url }}</td>
		<td>
			<div class="btn-group">
				<a href="index.php?uc=documentSpecifique&action=modifier&id={{ documentSpecifique.id }}" type="button" class="btn btn-warning">
					<span class="glyphicon glyphicon-edit"></span> Modifier
				</a>
				<a href="index.php?uc=documentSpecifique&action=suppression&id={{ documentSpecifique.id }}" type="button" class="btn btn-danger">
					<span class="glyphicon glyphicon-trash"></span> Supprimer
				</a>
			</div>
		</td>
	</tr>
        {% endfor %}
</table>

{% endif %}
<hr />
<a href="index.php?uc=dossierPdf&action=grille&code={{ dossierPdf.codeFormation }}" class="btn btn-primary">
	<span class="glyphicon glyphicon-circle-arrow-left"></span> Précédent
</a>


    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content panel-danger">
                <div class="modal-header panel-heading">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel">Attention !</h4>
                </div>
                <div class="modal-body">
                    Etes-vous sûr(e) de vouloir réaliser cette action ?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="btnOk">Ok</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Annuler</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

{% endblock %}

{% block scripts %}
    {{ parent() }}
    <script type="text/javascript">
        $(function () {
            var lastPushedButton = null;

            $('.btn-danger').click(function () {
                $('#myModal').modal('show');
                lastPushedButton = $(this);
                return false;
            });
            $('#btnOk').click(function () {
                window.location.href = lastPushedButton.attr("href");
            });
        });
    </script>
{% endblock %}